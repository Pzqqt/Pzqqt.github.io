---
layout: post
tags: Android
excerpt_separator: <!--more-->
toc: true
---

# 前言

由于Marble目前已有的类原生rom多多少少有些不完美，于是先当一段时间的MIUI“钉子户”。

但是我对天朝特供版MIUI没有一丝的好感（广告满天飞，各种侵犯隐私的行为），于是等解锁后就迫不及待地刷了口碑很好的MIUI.eu ROM。

<!--more-->

# 开启隐藏的按应用设置刷新率的选项

对于一些经常使用而且不需要高刷新率的app（比如：相机，视频播放器）和游戏，该功能会带来相当可观的省电效果。

## 1. 临时打开设置界面

adb执行以下命令：

```shell
adb shell "am start -n com.xiaomi.misettings/com.xiaomi.misettings.display.RefreshRate.HighRefreshOptionsActivity"
```

## 2. 添加选项到刷新率设置界面

adb执行以下命令：

```shell
adb shell "settings put system is_smart_fps 0"
```

之后在 `设置 -> 显示 -> 屏幕刷新率 -> 自定义` 中更改刷新率选项，就可以看到下方新出现的“使用高刷新率的应用”选项了。

# 启用一些本地化功能

启用本地化功能的实质，就是去除MIUI的全球版标识。

```shell
# 先使用`getprop`命令读取当前的机型代号
getprop ro.product.mod_device

# Marble (Redmi Note 12 Turbo / Poco F5) 设备读取到的值为`marble_xiaomieu_global`
# 我们要做的是删除值末尾的`_global`字样
# 由于这是以ro开头的只读属性, 因此应该使用Magisk的resetprop工具来重新设置值
# 注意每次开机都需要设置
resetprop ro.product.mod_device marble_xiaomieu
```

# 启用全面屏键盘优化支持

```shell
# 需要同时去除全球版标识
resetprop ro.miui.support_miui_ime_bottom 1
```

# 去除全球版标识之后，长按电源键无法呼出电源菜单？

## 方法1

安装小爱同学app，之后长按电源键会询问你是否设置为长按电源键呼出小爱，点X，问题解决。

之后如果不需要小爱同学的话可以把它卸载。

## 方法2

adb执行以下命令：

```shell
adb shell "setting put system xiaoai_power_guide 0"
```

# 桌面负一屏的智能助理卡片显示不了？

到 [Voyager MIUI Update](https://t.me/VoyagerMIUIUpdate) 频道搜索`#智能助理`，下载并安装最新版本，然后清除智能助理app的数据即可。

如果系统阻止你手动更新系统app，有三种解决方法：

1. 用某些xposed模块（如 [CustoMIUIzer14](https://github.com/monwf/customiuizer)）绕开限制
2. 用Magisk/KernelSU模块覆盖系统中的原版apk
3. 用`adb install`命令安装
